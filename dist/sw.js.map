{
  "version": 3,
  "sources": ["../node_modules/swtl/symbol.js", "../node_modules/swtl/html.js", "../node_modules/swtl/async.js", "../node_modules/swtl/render.js", "../node_modules/swtl/router.js", "../src/pages/Html.js", "../src/sw.js"],
  "sourcesContent": ["export const COMPONENT_SYMBOL = Symbol('component');\nexport const ASYNC_SYMBOL = Symbol('async');", "import { COMPONENT_SYMBOL } from './symbol.js';\n\nconst TEXT = 'TEXT';\nconst COMPONENT = 'COMPONENT';\n\nconst NONE = 'NONE';\nconst PROP = 'PROP';\nconst CHILDREN = 'CHILDREN';\n\nconst SET_PROP = 'SET_PROP';\nconst PROP_VAL = 'PROP_VAL';\n\nexport function* html(statics, ...dynamics) {\n  /**\n   * If no dynamics, just return statics\n   */\n  if (!dynamics.length) {\n    yield* statics;\n  /**\n   * If no Components, just stitch statics and dynamics together\n   */\n  } else if (!dynamics.some(d => typeof d === 'function')) {\n    yield* statics.reduce((acc, s, i) => [...acc, s, ...(dynamics.length > i ? [dynamics[i]] : [])], []);\n  } else {\n    let MODE = TEXT;\n    let COMPONENT_MODE = NONE;\n    let PROP_MODE = NONE;\n  \n    const componentStack = [];\n  \n    /**\n     * @example\n     * source        = html`<h1>${1}</h1>`\n     * statics       = ['<h1>','</h1>'], \n     * dynamics      = [1]\n     */\n    for (let i = 0; i < statics.length; i++) {\n      let result = \"\";\n      const component = {\n        kind: COMPONENT_SYMBOL,\n        properties: [],\n        children: [],\n        fn: undefined,\n      };\n  \n      /**\n       * @example\n       * source        = html`<h1>${1}</h1>`\n       * statics       = ['<h1>','</h1>'], \n       * dynamics      = [1]\n       * \n       * statics[i]    = '<h1>'\n       * statics[i][j] = '<'\n       */\n      for (let j = 0; j < statics[i].length; j++) {\n        let c = statics[i][j];\n        if (MODE === TEXT) {\n          if (\n            c === \"<\" &&\n            /**\n             * @example <${Foo}>\n             *           ^\n             */\n            !statics[i][j + 1] && typeof dynamics[i] === \"function\"\n          ) {\n            MODE = COMPONENT;\n            component.fn = dynamics[i];\n            componentStack.push(component);\n          } else {\n            result += c;\n          }\n        } else if (MODE === COMPONENT) {\n          if (COMPONENT_MODE === PROP) {\n            const component = componentStack[componentStack.length - 1];\n            const property = component?.properties[component.properties.length - 1];\n            if (PROP_MODE === SET_PROP) {\n              let property = \"\";\n              while (\n                statics[i][j] !== \"=\" &&\n                statics[i][j] !== \"/\" &&\n                statics[i][j] !== \">\" &&\n                statics[i][j] !== '\"' &&\n                statics[i][j] !== \"'\" &&\n                statics[i][j] !== \" \" &&\n                property !== '...'\n              ) {\n                property += statics[i][j];\n                j++;\n              }\n  \n              /**\n               * @example <${Foo} foo=\"bar\">\n               *                     ^\n               */\n              if (statics[i][j] === \"=\") {\n                PROP_MODE = PROP_VAL;\n                /**\n                 * @example <${Foo} foo/>\n                 *                     ^\n                 */\n              } else if (statics[i][j] === \"/\" && COMPONENT_MODE === PROP) {\n                COMPONENT_MODE = NONE;\n                PROP_MODE = NONE;\n                const component = componentStack.pop();\n                if (!componentStack.length) {\n                  result = '';\n                  yield component;\n                }\n                /**\n                 * @example <${Foo} foo>children</a>\n                 *                     ^\n                 */\n              } else if (statics[i][j] === \">\" && COMPONENT_MODE === PROP) {\n                COMPONENT_MODE = CHILDREN;\n                PROP_MODE = NONE;\n              }\n  \n              if (property === '...') {\n                component.properties.push(...Object.entries(dynamics[i]).map(([name,value])=> ({name, value})));\n              } else if (property) {\n                component.properties.push({name: property, value: true});\n              }\n            } else if (PROP_MODE === PROP_VAL) {\n              /**\n               * @example <${Foo} bar='hi'>\n               *                      ^\n               * @example <${Foo} bar='${1}'>\n               *                      ^\n               * @example <${Foo} bar=\"hi\">\n               *                      ^\n               * @example <${Foo} bar=\"${1}\">\n               *                      ^\n               */\n              if (statics[i][j] === '\"' || statics[i][j] === \"'\") {\n                const quote = statics[i][j];\n                /**\n                 * @example <${Foo} bar=\"${1}\">\n                 *                       ^^^^\n                 */\n                if (!statics[i][j + 1]) {\n                  property.value = dynamics[i];\n                  PROP_MODE = SET_PROP;\n                } else {\n                  /**\n                   * @example <${Foo} bar=\"hi\">\n                   *                       ^^\n                   * @example <${Foo} bar='hi'>\n                   *                       ^^\n                   */\n                  let val = '';\n                  j++; // account for quote\n                  while(statics[i][j] !== quote) {\n                    val += statics[i][j];\n                    j++;\n                  }\n  \n                  property.value = val || '';\n                  PROP_MODE = SET_PROP;\n                }\n                /**\n                 * @example <${Foo} bar=${1}>\n                 *                          ^\n                 */\n              } else if (!statics[i][j - 1]) {\n                property.value = dynamics[i - 1];\n                PROP_MODE = SET_PROP;\n\n                if(statics[i][j] === '>') {\n                  PROP_MODE = NONE;\n                  COMPONENT_MODE = CHILDREN;\n                  /**\n                   * @example <${Foo} bar=${1}/>\n                   *                          ^\n                   * Yield if we finished the component\n                   */\n                } else if (statics[i][j] === '/') {\n                  const component = componentStack.pop();\n                  if (!componentStack.length) {\n                    yield component;\n                  }\n                }\n              } else {\n                /**\n                 * @example <${Foo} bar=hi>\n                 *                        ^\n                 * @example <${Foo} bar=hi/>\n                 *                        ^\n                 * @example <${Foo} bar=hi baz>\n                 *                        ^\n                 */\n                let val = '';\n                while(\n                  statics[i][j] !== ' ' &&\n                  statics[i][j] !== '/' &&\n                  statics[i][j] !== '>'\n                ) {\n                  val += statics[i][j];\n                  j++;\n                }\n  \n                property.value = val || '';\n                PROP_MODE = SET_PROP;\n  \n                /**\n                 * @example <${Foo} bar=hi/>\n                 *                        ^\n                 * Yield if we finished the component\n                 */\n                if (statics[i][j] === '/') {\n                  const component = componentStack.pop();\n                  if (!componentStack.length) {\n                    yield component;\n                  }\n                }\n              }\n            }\n          } else if (COMPONENT_MODE === CHILDREN) {\n            const currentComponent = componentStack[componentStack.length - 1];\n  \n            /**\n             * @example <${Foo}>children<//>\n             *                           ^^\n             */\n            if (statics[i][j + 1] === \"/\" && statics[i][j + 2] === \"/\") {\n              if (result) {\n                currentComponent.children.push(result);\n                result = '';\n              }\n  \n              j += 3;\n              /**\n               * If there are no components on the stack, this is a top level\n               * component, and we can yield\n               */\n              const component = componentStack.pop();\n              if (!componentStack.length) {\n                MODE = TEXT;\n                COMPONENT_MODE = NONE;\n                yield component;\n              }\n            } else if (statics[i][j] === '<' && !statics[i][j + 1] && typeof dynamics[i] === 'function') {\n              /**\n               * If the next child is a component, we need to push to children what we have\n               */\n              if (result) {\n                currentComponent.children.push(result);\n                result = '';\n              }\n              COMPONENT_MODE = PROP;\n              PROP_MODE = SET_PROP;\n              component.fn = dynamics[i];\n              componentStack.push(component);\n            } else if (!statics[i][j+1]) {\n              /**\n               * @example <${Foo}><h1>hi ${2}</h1><//>\n               *                         ^^^^\n               */\n              if(result && dynamics.length > i) {\n                result += statics[i][j];\n                currentComponent.children.push(result);\n                currentComponent.children.push(dynamics[i]);\n              }\n            } else {\n              result += statics[i][j];\n            }\n  \n          } else if (c === \">\") {\n            COMPONENT_MODE = CHILDREN;\n          } else if (c === \" \") {\n            COMPONENT_MODE = PROP;\n            PROP_MODE = SET_PROP;\n            /** self closing tag */\n          } else if (c === \"/\" && statics[i][j + 1] === \">\") {\n            MODE = TEXT;\n            COMPONENT_MODE = NONE;\n            /**\n             * If there are no components on the stack, this is a top level\n             * component, and we can yield\n             */\n            const component = componentStack.pop();\n            if (!componentStack.length) {\n              result = '';\n              yield component;\n            }\n            j++;\n          } else {\n            result += c;\n          }\n        } else {\n          result += c;\n        }\n      }\n  \n      if (result && COMPONENT_MODE !== CHILDREN) {\n        yield result;\n      }\n  \n      if (componentStack.length > 1 && component.fn) {\n        componentStack[componentStack.length - 2].children.push(component)\n      }\n  \n      // We're at the end of statics, now process dynamics if there are any\n      if (dynamics.length > i && MODE !== COMPONENT) {\n        yield dynamics[i];\n      }\n    }\n  }\n}", "import { ASYNC_SYMBOL } from './symbol.js';\n\nfunction Async({task, children}) {\n  return { \n    task, \n    template: children.find(c => typeof c === 'function')\n  };\n}\n\nAsync.kind = ASYNC_SYMBOL;\n\nconst when = (condition, template) => condition ? template() : '';\n\nexport { Async, when };", "import { html } from './html.js';\nimport { ASYNC_SYMBOL, COMPONENT_SYMBOL } from \"./symbol.js\";\n\nfunction hasGetReader(obj) {\n  return typeof obj.getReader === \"function\";\n}\n\nexport async function* streamAsyncIterator(stream) {\n  const reader = stream.getReader();\n  const decoder = new TextDecoder(\"utf-8\");\n\n  try {\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) return;\n      yield decoder.decode(value);\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nasync function* handleIterator(iterable) {\n  if (hasGetReader(iterable)) {\n    for await (const chunk of streamAsyncIterator(iterable)) {\n      yield chunk;\n    }\n  } else {\n    for await (const chunk of iterable) {\n      yield chunk;\n    }\n  }\n}\n\nexport async function* handle(chunk, promises) {\n  if (typeof chunk === \"string\") {\n    yield chunk;\n  } else if (Array.isArray(chunk)) {\n    yield* _render(chunk, promises);\n  } else if (typeof chunk.then === \"function\") {\n    const v = await chunk;\n    yield* handle(v, promises);\n  } else if (chunk instanceof Response && chunk.body) {\n    yield* handleIterator(chunk.body);\n  } else if (chunk[Symbol.asyncIterator] || chunk[Symbol.iterator]) {\n    yield* _render(chunk, promises);\n  } else if (chunk?.fn?.kind === ASYNC_SYMBOL) {\n    const { task, template } = chunk.fn({\n      ...chunk.properties.reduce((acc, prop) => ({...acc, [prop.name]: prop.value}), {}),\n      children: chunk.children,\n    });\n    const id = promises.length;\n    promises.push(\n      task()\n        .then(data => ({\n          id,\n          template: template({state: 'success', data}) \n        }))\n        .catch(error => ({\n          id,\n          template: template({state: 'error', error}) \n        }))\n    );\n    yield* _render(html`<pending-task style=\"display: contents;\" data-id=\"${id.toString()}\">${template({state: 'pending'})}</pending-task>`, promises);\n  } else if (chunk.kind === COMPONENT_SYMBOL) {\n    yield* _render(\n      await chunk.fn({\n        ...chunk.properties.reduce((acc, prop) => ({...acc, [prop.name]: prop.value}), {}),\n        children: chunk.children,\n      }),\n      promises\n    );\n  } else {\n    yield chunk.toString();\n  }\n}\n\nasync function* _render(template, promises) {\n  for await (const chunk of template) {\n    yield* handle(chunk, promises);\n  }\n}\n\nexport async function* render(template) {\n  let promises = [];\n\n  yield* _render(template, promises);\n\n  promises = promises.map(promise => {\n    let p = promise.then(val => {\n      promises.splice(promises.indexOf(p), 1);\n      return val;\n    });\n    return p;\n  });\n\n  while (promises.length > 0) {\n    const nextPromise =  await Promise.race(promises);\n    const { id, template } = nextPromise;\n\n    yield* render(html`\n      <template data-id=\"${id.toString()}\">${template}</template>\n      <script>\n        {\n          let toReplace = document.querySelector('pending-task[data-id=\"${id.toString()}\"]');\n          const template = document.querySelector('template[data-id=\"${id.toString()}\"]').content.cloneNode(true);\n          toReplace.replaceWith(template);\n        }\n      </script>\n    `)\n  }\n}\n\nexport async function renderToString(renderResult) {\n  let result = \"\";\n\n  for await (const chunk of render(renderResult)) {\n    result += chunk;\n  }\n\n  return result;\n}\n", "import { render } from './render.js';\n\nexport class Router {\n  constructor({ routes, fallback, baseHref = '' }) {\n    this.fallback = {\n      render: fallback,\n      params: {}\n    };\n    this.routes = routes.map(route => ({\n      ...route,\n      urlPattern: new URLPattern({\n        pathname: route.path,\n        baseURL: `${self.location.origin}${baseHref}`,\n        search: '*',\n        hash: '*',\n      })\n    }));\n  }\n\n  async handleRequest(request) {\n    const url = new URL(request.url);\n    let matchedRoute;\n\n    for (const route of this.routes) {\n\n      const match = route.urlPattern.exec(url);\n      if(match) {\n        matchedRoute = {\n          render: route.render,\n          params: match?.pathname?.groups ?? {},\n        };\n        break;\n      }\n    }\n\n    const route = matchedRoute?.render ?? this?.fallback?.render;\n    if(route) {\n      const query = Object.fromEntries(new URLSearchParams(request.url.search));\n\n      const iterator = render(route({query, params: matchedRoute?.params, request}));\n      const encoder = new TextEncoder();\n      const stream = new ReadableStream({\n        async pull(controller) {\n          const { value, done } = await iterator.next();\n          if (done) {\n            controller.close();\n          } else {\n            controller.enqueue(encoder.encode(value));\n          }\n        }\n      });\n\n      return new Response(stream, { \n        status: 200,\n        headers: { \n          'Content-Type': 'text/html', \n          'Transfer-Encoding': 'chunked', \n        } \n      });\n    }\n  }\n}", "import { html } from 'swtl';\n\nexport function Html({children, title, styles = []}) {\n  return html`\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1,viewport-fit=cover\">\n        <meta name=\"Description\" content=\"swtl demo\">\n        <title>${title ?? ''}</title>\n        <style>\n          img {\n            max-width: 500px;\n          }\n        </style>\n        ${styles}\n      </head>\n      <body>\n        <h1>swtl</h1>\n        <nav>\n          <ul>\n            <li><a href=\"/\">home</a></li>\n            <li><a href=\"/generator\">generator</a></li>\n            <li><a href=\"/really-long-list\">render a really long list</a></li>\n            <li><a href=\"/out-of-order\">out-of-order streaming</a></li>\n            <li>Blogs</li>\n            <ul>\n              <li><a href=\"/blog/swtl\">Service Worker Templating Language</a></li>\n              <li><a href=\"/blog/swsr\">Service Worker Side Rendering</a></li>\n            </ul>\n            <li><a href=\"/not-found\">not found</a></li>\n          </ul>\n        </nav>\n        ${children}\n        <script>\n          let refreshing;\n          async function handleUpdate() {\n            // check to see if there is a current active service worker\n            const oldSw = (await navigator.serviceWorker.getRegistration())?.active?.state;\n\n            navigator.serviceWorker.addEventListener('controllerchange', async () => {\n              if (refreshing) return;\n\n              // when the controllerchange event has fired, we get the new service worker\n              const newSw = (await navigator.serviceWorker.getRegistration())?.active?.state;\n\n              // if there was already an old activated service worker, and a new activating service worker, do the reload\n              if (oldSw === 'activated' && newSw === 'activating') {\n                refreshing = true;\n                window.location.reload();\n              }\n            });\n          }\n\n          handleUpdate();\n        </script>\n      </body>\n    </html>\n  `\n}\n", "import { Router, html } from 'swtl';\nimport { Async, when } from 'swtl/async.js';\nimport { Html } from './pages/Html.js';\n\nasync function* generator() {\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  yield* html`<li>1</li>`;\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  yield* html`<li>2</li>`;\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  yield* html`<li>3</li>`;\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  yield* html`<li>4</li>`;\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  yield* html`<li>5</li>`;\n}\n\nfunction* reallyLongList() {\n  let i = 0;\n  while(i < 20000) {\n    yield* html`<li>${i++}</li>`;\n  }\n}\n\nconst router = new Router({\n  routes: [\n    {\n      path: '/',\n      render: ({params, query, request}) => html`\n        <${Html} title=\"swtl\">\n          Home\n        <//>\n      `\n    },\n    {\n      path: '/out-of-order',\n      render: ({params, query, request}) => html`\n        <${Html} title=\"out of order\">\n          <ul>\n            <li>\n              <${Async} task=${() => new Promise(r => setTimeout(() => r({foo:'foo'}), 3000))}>\n                ${({state, data}) => html`\n                  ${when(state === 'pending', () => html`[PENDING] slow`)}\n                  ${when(state === 'success', () => html`[RESOLVED] slow ${data.foo}`)}\n                `}\n              <//>\n            </li>\n            <li>\n              <${Async} task=${() => new Promise(r => setTimeout(() => r({bar:'bar'}), 1500))}>\n                ${({state, data}) => html`\n                  ${when(state === 'pending', () => html`[PENDING] fast`)}\n                  ${when(state === 'success', () => html`[RESOLVED] fast ${data.bar}`)}\n                `}\n              <//>\n            </li>\n          </ul>\n        <//>\n      `\n    },\n    {\n      path: '/blog/:id',\n      render: ({params, query, request}) => html`\n        <${Html} title=${`blog ${params.id}`}>\n          ${fetch(`./blogs/${params.id}.html`)}\n        <//>\n      `\n    },\n    {\n      path: '/generator',\n      render: ({params, query, request}) => html`<${Html} title=\"generator\"><ul>${generator()}</ul><//>`\n    },\n    {\n      path: '/really-long-list',\n      render: ({params, query, request}) => html`<${Html} title=\"really long list\"><ul>${reallyLongList()}</ul><//>`\n    },\n  ],\n  fallback: () => html`<${Html} title=\"not found\">Not found!<//>`,\n});\n\nself.addEventListener(\"install\", () => {\n  self.skipWaiting();\n});\n\nself.addEventListener(\"activate\", (event) => {\n  event.waitUntil(\n    clients.claim().then(() => {\n      self.clients.matchAll().then((clients) => {\n        clients.forEach((client) =>\n          client.postMessage({ type: \"SW_ACTIVATED\" })\n        );\n      });\n    })\n  );\n});\n\nself.addEventListener(\"fetch\", (event) => {\n  if (event.request.mode === \"navigate\") {\n    event.respondWith(router.handleRequest(event.request));\n  }\n});\n\n"],
  "mappings": "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",
  "names": ["COMPONENT_SYMBOL", "ASYNC_SYMBOL", "TEXT", "COMPONENT", "NONE", "PROP", "CHILDREN", "SET_PROP", "PROP_VAL", "html", "statics", "dynamics", "d", "acc", "s", "MODE", "COMPONENT_MODE", "PROP_MODE", "componentStack", "i", "result", "component", "COMPONENT_SYMBOL", "j", "property", "name", "value", "quote", "val", "currentComponent", "Async", "task", "children", "c", "ASYNC_SYMBOL", "when", "condition", "template", "hasGetReader", "obj", "streamAsyncIterator", "stream", "reader", "decoder", "done", "value", "handleIterator", "iterable", "chunk", "handle", "promises", "_render", "v", "ASYNC_SYMBOL", "task", "template", "acc", "prop", "id", "data", "error", "html", "COMPONENT_SYMBOL", "_a", "render", "promise", "p", "val", "nextPromise", "__template", "Router", "routes", "fallback", "baseHref", "route", "request", "url", "matchedRoute", "match", "query", "iterator", "render", "encoder", "stream", "controller", "value", "done", "_a", "Html", "children", "title", "styles", "html", "__template", "generator", "resolve", "html", "reallyLongList", "i", "router", "Router", "params", "query", "request", "Html", "Async", "r", "state", "data", "when", "event", "clients", "client"]
}
